(()=>{"use strict";const e=window.wp.element,s=window.wp.i18n,n=window.wp.components;function t(e){if("string"!=typeof e)return"";let s=e.trim();return s?(s.startsWith("--")||(s="--"+s.replace(/^-+/,"")),s.replace(/[^a-zA-Z0-9_\-]/g,"-")):""}function r(e){const s=t(e);return s?s.toLowerCase():""}function a(e){const s=Object.create(null),n=[];return e.forEach(e=>{if(!e||"object"!=typeof e)return;const t=r(e.name);t&&null!=e.value&&String(e.value).trim()&&(s[t]?n.includes(t)||n.push(t):s[t]=1)}),n}function l(e){const s=!!e?.color;return{name:"--nouveau-token",value:s?"#ffffff":"",type:s?"color":"text",description:"",group:"G√©n√©ral"}}function o(e){const s=(null!=e?e:"").trim();return""===s?"G√©n√©ral":s}const i=window.ReactJSXRuntime,c={color:{label:(0,s.__)("Couleur","supersede-css-jlg"),input:"color"},text:{label:(0,s.__)("Texte","supersede-css-jlg"),input:"text"},number:{label:(0,s.__)("Nombre","supersede-css-jlg"),input:"number"}},d={addToken:(0,s.__)("Ajouter un token","supersede-css-jlg"),emptyState:(0,s.__)("Aucun token pour le moment. Utilisez le bouton ci-dessous pour commencer.","supersede-css-jlg"),groupLabel:(0,s.__)("Groupe","supersede-css-jlg"),nameLabel:(0,s.__)("Nom","supersede-css-jlg"),valueLabel:(0,s.__)("Valeur","supersede-css-jlg"),typeLabel:(0,s.__)("Type","supersede-css-jlg"),descriptionLabel:(0,s.__)("Description","supersede-css-jlg"),deleteLabel:(0,s.__)("Supprimer","supersede-css-jlg"),saveSuccess:(0,s.__)("Tokens enregistr√©s","supersede-css-jlg"),saveError:(0,s.__)("Impossible d‚Äôenregistrer les tokens.","supersede-css-jlg"),duplicateError:(0,s.__)("Certains tokens utilisent le m√™me nom. Corrigez les doublons avant d‚Äôenregistrer.","supersede-css-jlg"),duplicateListPrefix:(0,s.__)("Doublons¬†:","supersede-css-jlg"),copySuccess:(0,s.__)("Tokens copi√©s","supersede-css-jlg"),reloadConfirm:(0,s.__)("Des modifications locales non enregistr√©es seront perdues. Continuer ?","supersede-css-jlg"),toolbarTitle:(0,s.__)("üé® √âditeur Visuel de Tokens","supersede-css-jlg"),generatedTitle:(0,s.__)("üìú Code CSS g√©n√©r√©","supersede-css-jlg"),saveLabel:(0,s.__)("Enregistrer les Tokens","supersede-css-jlg"),copyLabel:(0,s.__)("Copier le CSS","supersede-css-jlg"),reloadLabel:(0,s.__)("Recharger","supersede-css-jlg"),unsavedBadge:(0,s.__)("Modifications locales","supersede-css-jlg")};function u(e,s={}){"function"==typeof window.sscToast&&window.sscToast(e,s),"assertive"===s.politeness&&function(e,s="assertive"){window.wp?.a11y?.speak&&window.wp.a11y.speak(e,s)}(e,"assertive")}const p=({token:e,index:s,types:t,duplicateSet:a,i18n:l,onUpdate:o,onBlurName:d,onDelete:u})=>{var p,g,m;const f=r(e.name),h=""!==f&&a.has(f),x=Object.keys(t).length?Object.keys(t):Object.keys(c),j=e.type&&t[e.type]?e.type:x[0],v=null!==(p=null!==(g=t[j])&&void 0!==g?g:c[j])&&void 0!==p?p:{input:"text"},y=null!==(m=v?.input)&&void 0!==m?m:"text",b="color"===y&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e.value.trim());return(0,i.jsxs)(n.Card,{className:"ssc-token-row"+(h?" ssc-token-row--duplicate":""),"data-index":s,children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.Flex,{justify:"space-between",align:"center",wrap:!0,children:[(0,i.jsx)(n.FlexBlock,{children:(0,i.jsx)("strong",{children:e.name||l.nameLabel})}),(0,i.jsx)(n.FlexItem,{children:(0,i.jsx)(n.Button,{variant:"tertiary",isDestructive:!0,className:"token-delete",onClick:()=>u(s),children:l.deleteLabel})})]})}),(0,i.jsx)(n.CardBody,{children:(0,i.jsxs)("div",{className:"ssc-token-grid",children:[(0,i.jsxs)("label",{className:"ssc-token-field",children:[(0,i.jsx)("span",{className:"ssc-token-field__label",children:l.nameLabel}),(0,i.jsx)("input",{type:"text",className:"token-field-input token-name"+(h?" token-field-input--duplicate":""),"aria-invalid":h?"true":void 0,value:e.name,onChange:e=>o(s,{name:e.target.value}),onBlur:()=>d(s)})]}),(0,i.jsxs)("label",{className:"ssc-token-field",children:[(0,i.jsx)("span",{className:"ssc-token-field__label",children:l.valueLabel}),"color"===y?(0,i.jsx)("input",{type:b?"color":"text",className:"token-field-input token-value",value:e.value,onChange:e=>o(s,{value:e.target.value})}):(0,i.jsx)("input",{type:"number"===y?"number":"text",step:"number"===y?"0.01":void 0,className:"token-field-input token-value",value:e.value,onChange:e=>o(s,{value:e.target.value})})]}),(0,i.jsxs)("label",{className:"ssc-token-field",children:[(0,i.jsx)("span",{className:"ssc-token-field__label",children:l.typeLabel}),(0,i.jsx)("select",{className:"token-field-input token-type",value:j,onChange:e=>o(s,{type:e.target.value}),children:x.map(e=>{var s,n;const r=null!==(s=t[e])&&void 0!==s?s:c[e],a=null!==(n=r?.label)&&void 0!==n?n:e;return(0,i.jsx)("option",{value:e,children:a},e)})})]}),(0,i.jsxs)("label",{className:"ssc-token-field",children:[(0,i.jsx)("span",{className:"ssc-token-field__label",children:l.groupLabel}),(0,i.jsx)("input",{type:"text",list:"ssc-token-groups-list",className:"token-field-input token-group",value:e.group,onChange:e=>o(s,{group:e.target.value})})]}),(0,i.jsxs)("label",{className:"ssc-token-field",children:[(0,i.jsx)("span",{className:"ssc-token-field__label",children:l.descriptionLabel}),(0,i.jsx)("textarea",{className:"token-field-input token-description",rows:2,value:e.description,onChange:e=>o(s,{description:e.target.value})})]})]})})]})},g={};function m(e,s={}){"function"==typeof window.sscToast&&window.sscToast(e,s)}function f(e){let s=document.getElementById(e);return s||(s=document.createElement("style"),s.id=e,document.head.appendChild(s)),s}function h(e){const s=document.getElementById(e);s?.parentElement&&s.parentElement.removeChild(s)}const x={stable:"M0,30 L100,30 L110,18 L120,42 L130,26 L140,30 L240,30 L250,20 L260,40 L270,28 L280,30 L400,30",fast:"M0,30 L60,30 L70,8 L80,52 L90,18 L100,30 L160,30 L170,12 L180,48 L190,22 L200,30 L400,30",critical:"M0,30 L40,30 L50,5 L60,55 L70,15 L80,30 L120,30 L130,2 L140,58 L150,12 L160,30 L400,30"};async function j(e,s,{append:n=!0}={}){if(e.root&&!(await fetch(`${e.root}save-css`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},body:JSON.stringify({css:s,append:n})})).ok)throw new Error("Failed to save CSS")}const v={type:"stars",starColor:"#FFFFFF",starCount:200,gradientSpeed:10},y={preset:"stable",color:"#00ff00",top:50,zIndex:1,logoSize:100,logoUrl:""};function b(s,n){(0,e.render)((0,i.jsx)(n,{}),s)}const C=document.getElementById("ssc-token-app-root");C&&b(C,function(){var r;const m=null!==(r=window.SSC_TOKENS_DATA)&&void 0!==r?r:{},f=(0,e.useMemo)(()=>{var e;return{...d,...null!==(e=m.i18n)&&void 0!==e?e:g}},[m.i18n]),h={root:null!==(x=window.SSC?.rest?.root)&&void 0!==x?x:"",nonce:null!==(j=window.SSC?.rest?.nonce)&&void 0!==j?j:""};var x,j;const[v,y]=(0,e.useState)(()=>Array.isArray(m.tokens)?m.tokens.map(e=>({...e})):[]),b=(0,e.useMemo)(()=>{var e;return{...c,...null!==(e=m.types)&&void 0!==e?e:{}}},[m.types]),[C,_]=(0,e.useState)(!1),[k,w]=(0,e.useState)(!1),[S,L]=(0,e.useState)(!1),[N,A]=(0,e.useState)(null),E=(0,e.useRef)(!1),B=(0,e.useMemo)(()=>function(e){return Array.isArray(e)&&0!==e.length?`:root {\n${e.filter(e=>e&&"string"==typeof e.name&&""!==e.name.trim()).map(e=>`    ${e.name}: ${e.value};`).join("\n")}\n}`:":root {\n}\n"}(v),[v]),F=(0,e.useMemo)(()=>a(v),[v]),$=(0,e.useMemo)(()=>new Set(F),[F]),I=(0,e.useMemo)(()=>{const e=new Set;return v.forEach(s=>{e.add(o(s.group))}),Array.from(e)},[v]);var T,R;T=S,R=f.reloadConfirm,(0,e.useEffect)(()=>{if(!T)return;const e=e=>(e.preventDefault(),e.returnValue=R,R);return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[T,R]),(0,e.useEffect)(()=>{if(!E.current){if("string"==typeof m.css&&m.css){const e=document.getElementById("ssc-tokens-preview-style");e&&(e.textContent=m.css)}E.current=!0}},[m.css]);const z=(0,e.useCallback)((e,s)=>{y(n=>n.map((n,t)=>t===e?{...n,...s}:n)),L(!0)},[]),O=(0,e.useCallback)(e=>{y(s=>s.map((s,n)=>{if(n!==e)return s;const r=t(s.name);return{...s,name:r}})),L(!0)},[]),P=(0,e.useCallback)(e=>{y(s=>s.filter((s,n)=>n!==e)),L(!0)},[]),D=(0,e.useCallback)(()=>{y(e=>[...e,l(b)]),L(!0)},[b]),M=(0,e.useCallback)((e,s)=>{const n=s&&s.trim()?s:f.duplicateError,t=e.filter(e=>e&&""!==e.trim());u(t.length?`${n} ${f.duplicateListPrefix} ${t.join(", ")}`:n,{politeness:"assertive",role:"alert"})},[f.duplicateError,f.duplicateListPrefix]),q=(0,e.useCallback)((e,s)=>{M(e,s)},[M]),H=(0,e.useCallback)(async(e=!1)=>{if(h.root){w(!0),A(null);try{const s=await fetch(`${h.root}tokens`,{headers:{"X-WP-Nonce":h.nonce}});if(!s.ok)return;const n=await s.json();!Array.isArray(n.tokens)||!e&&S||(y(n.tokens.map(e=>({...e}))),L(!1))}catch(e){console.error("SSC tokens fetch failed",e)}finally{w(!1)}}},[h.root,h.nonce,S]);(0,e.useEffect)(()=>{H()},[H]);const G=(0,e.useCallback)(()=>{S&&!window.confirm(f.reloadConfirm)||(L(!1),H(!0))},[H,S,f.reloadConfirm]),U=(0,e.useCallback)(async()=>{if(!h.root)return;const e=a(v);if(e.length){const s=function(e,s){if(!Array.isArray(s)||!s.length)return[];const n=new Set(s.map(e=>"string"==typeof e?e.toLowerCase():"").filter(e=>""!==e));if(!n.size)return[];const r=[];return e.forEach(e=>{if(!e||"string"!=typeof e.name)return;const s=t(e.name),a=s?s.toLowerCase():"";a&&n.has(a)&&s&&!r.includes(s)&&r.push(s)}),r}(v,e);return void M(s)}_(!0),A(null);try{const e=await fetch(`${h.root}tokens`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":h.nonce},body:JSON.stringify({tokens:v})});if(!e.ok){if(422===e.status){const s=await e.json(),n=function(e){if(!e||"object"!=typeof e||!Array.isArray(e.duplicates)||!e.duplicates.length)return null;const s=[],n=[];return e.duplicates.forEach(e=>{if(!e||"object"!=typeof e)return;const t="string"==typeof e.canonical?e.canonical:"",r=t?t.toLowerCase():"";r&&!s.includes(r)&&s.push(r);const a=e=>{if("string"!=typeof e)return;const s=e.trim();""===s||n.includes(s)||n.push(s)};Array.isArray(e.variants)&&e.variants.forEach(a),Array.isArray(e.conflicts)?e.conflicts.forEach(e=>{e&&"object"==typeof e&&a(e.name)}):"string"==typeof t&&a(t)}),s.length||n.length?{canonicalKeys:s,labels:n}:null}(s);if(n)return void q(n.labels,s?.message)}return A(f.saveError),void u(f.saveError,{politeness:"assertive"})}const s=await e.json();Array.isArray(s.tokens)&&y(s.tokens.map(e=>({...e}))),L(!1),u(f.saveSuccess,{politeness:"polite"})}catch(e){A(f.saveError),console.error("SSC tokens save failed",e),u(f.saveError,{politeness:"assertive"})}finally{_(!1)}},[q,M,h.nonce,h.root,v,f.saveError,f.saveSuccess]),W=(0,e.useCallback)(async()=>{await async function(e){if("undefined"!=typeof navigator&&navigator.clipboard&&window.isSecureContext)return void await navigator.clipboard.writeText(e);const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch(e){console.error("SSC clipboard copy failed",e)}document.body.removeChild(s)}(B),u(f.copySuccess,{politeness:"polite"})},[B,f.copySuccess]),V=(0,e.useMemo)(()=>{const e=new Map;return v.forEach((s,n)=>{const t=o(s.group);e.has(t)||e.set(t,[]),e.get(t).push({token:s,index:n})}),Array.from(e.entries())},[v]);return(0,i.jsxs)("div",{className:"ssc-token-app","data-component":"tokens",children:[(0,i.jsx)(n.Card,{className:"ssc-token-toolbar",children:(0,i.jsx)(n.CardBody,{children:(0,i.jsxs)(n.Flex,{align:"center",justify:"space-between",wrap:!0,children:[(0,i.jsx)(n.FlexBlock,{children:(0,i.jsx)("h3",{children:f.toolbarTitle})}),(0,i.jsx)(n.FlexItem,{children:(0,i.jsxs)(n.Flex,{align:"center",gap:8,wrap:!0,children:[S&&(0,i.jsx)(n.Badge,{status:"warning",children:f.unsavedBadge}),(0,i.jsx)(n.Button,{id:"ssc-token-add",variant:"primary",onClick:D,children:f.addToken}),(0,i.jsx)(n.Button,{id:"ssc-tokens-save",variant:"primary",isBusy:C,disabled:C,onClick:U,children:f.saveLabel}),(0,i.jsx)(n.Button,{id:"ssc-tokens-copy",variant:"secondary",onClick:W,children:f.copyLabel}),(0,i.jsx)(n.Button,{id:"ssc-tokens-reload",variant:"tertiary",onClick:G,children:f.reloadLabel})]})})]})})}),k&&(0,i.jsx)(n.Notice,{status:"info",isDismissible:!1,className:"ssc-token-notice",children:(0,i.jsxs)(n.Flex,{align:"center",gap:8,children:[(0,i.jsx)(n.Spinner,{}),(0,i.jsx)("span",{children:(0,s.__)("Chargement des tokens‚Ä¶","supersede-css-jlg")})]})}),N&&(0,i.jsx)(n.Notice,{status:"error",onRemove:()=>A(null),children:N}),0===v.length?(0,i.jsx)(n.Card,{className:"ssc-token-empty",children:(0,i.jsx)(n.CardBody,{children:f.emptyState})}):V.map(([e,s])=>(0,i.jsxs)(n.Card,{className:"ssc-token-group",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h4",{children:e})}),(0,i.jsx)(n.CardBody,{children:(0,i.jsx)("div",{className:"ssc-token-group-grid",children:s.map(({token:s,index:n})=>(0,i.jsx)(p,{token:s,index:n,types:b,duplicateSet:$,i18n:f,onUpdate:z,onBlurName:O,onDelete:P},`${e}-${n}`))})})]},e)),(0,i.jsxs)(n.Card,{className:"ssc-token-css",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h3",{children:f.generatedTitle})}),(0,i.jsxs)(n.CardBody,{children:[I.length>0&&(0,i.jsx)("datalist",{id:"ssc-token-groups-list",children:I.map(e=>(0,i.jsx)("option",{value:e},e))}),(0,i.jsx)("textarea",{id:"ssc-tokens",readOnly:!0,className:"ssc-token-css-textarea",value:B,rows:12})]})]}),(0,i.jsxs)(n.Card,{className:"ssc-token-preview",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h3",{children:(0,s.__)("üëÅÔ∏è Aper√ßu en Direct","supersede-css-jlg")})}),(0,i.jsxs)(n.CardBody,{children:[(0,i.jsx)("style",{id:"ssc-tokens-preview-style",children:B}),(0,i.jsxs)("div",{id:"ssc-tokens-preview",className:"ssc-token-preview-box",children:[(0,i.jsx)(n.Button,{variant:"primary",style:{backgroundColor:"var(--couleur-principale)",borderRadius:"var(--radius-moyen)"},children:(0,s.__)("Bouton Principal","supersede-css-jlg")}),(0,i.jsx)("a",{href:"#",style:{marginLeft:"16px",color:"var(--couleur-principale)"},children:(0,s.__)("Lien Principal","supersede-css-jlg")})]})]})]})]})});const _=document.getElementById("ssc-visual-effects-app-root");_&&b(_,function(){const t={root:null!==(r=window.SSC?.rest?.root)&&void 0!==r?r:"",nonce:null!==(a=window.SSC?.rest?.nonce)&&void 0!==a?a:""};var r,a;const[l,o]=(0,e.useState)("backgrounds"),[c,d]=(0,e.useState)(v),[u,p]=(0,e.useState)(""),g=(0,e.useRef)(null),[b,C]=(0,e.useState)(!1),[_,k]=(0,e.useState)(y),[w,S]=(0,e.useState)(""),L=(0,e.useRef)(null),N=(0,e.useRef)(null),[A,E]=(0,e.useState)(!1),B=(0,e.useRef)(null),[F,$]=(0,e.useState)({scanlineColor:"#00ff00",scanlineOpacity:.4,scanlineSpeed:.5,noiseIntensity:.1,chromaticAberration:1});(0,e.useEffect)(()=>{if("stars"===c.type){const{css:n}=(e=c.starColor,s=c.starCount,{css:`@keyframes ssc-stars-anim { from { transform: translateY(0); } to { transform: translateY(-2000px); } }\n.ssc-bg-stars {\n  background: #000000;\n  position: relative;\n  overflow: hidden;\n}\n.ssc-bg-stars::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1px;\n  height: 1px;\n  background: transparent;\n  box-shadow: ${Array.from({length:s}).map(()=>`${2e3*Math.random()}px ${2e3*Math.random()}px ${e}`).join(", ")};\n  animation: ssc-stars-anim 50s linear infinite;\n}`});p(n.trim()),f("ssc-stars-preview-style").textContent=n,h("ssc-gradient-anim-style"),g.current&&(g.current.className="ssc-ve-preview-box ssc-bg-stars",g.current.removeAttribute("style"))}else{const e=`@keyframes ssc-gradient-anim { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }\n.ssc-bg-gradient {\n  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);\n  background-size: 400% 400%;\n  animation: ssc-gradient-anim ${c.gradientSpeed}s ease infinite;\n}`;p(e.trim()),f("ssc-gradient-anim-style").textContent=e,h("ssc-stars-preview-style"),g.current&&(g.current.className="ssc-ve-preview-box ssc-bg-gradient",g.current.style.background="linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)",g.current.style.backgroundSize="400% 400%",g.current.style.animation=`ssc-gradient-anim ${c.gradientSpeed}s ease infinite`,g.current.removeAttribute("data-stars-shadows"))}var e,s},[c]);const I=(0,e.useCallback)(async()=>{if(u){C(!0);try{await j(t,u,{append:!0}),m((0,s.__)("Fond anim√© appliqu√© !","supersede-css-jlg"))}catch(e){console.error("SSC background apply failed",e),m((0,s.__)("√âchec de l'enregistrement du fond anim√©.","supersede-css-jlg"),{politeness:"assertive"})}finally{C(!1)}}},[u,t]);(0,e.useEffect)(()=>{const{preset:e,color:s,top:n,zIndex:t,logoSize:r,logoUrl:a}=_,l="fast"===e?"1.2s":"critical"===e?"0.8s":"2s";S(`@keyframes ssc-ecg-line{to{stroke-dashoffset:0}}\n.ssc-ecg-container { position: relative; }\n.ssc-ecg-line-svg { position: absolute; top: ${n}%; left: 0; width: 100%; height: auto; transform: translateY(-50%); z-index: ${t}; }\n.ssc-ecg-path-animated { fill:none; stroke:${s}; stroke-width:2; stroke-dasharray:1000; stroke-dashoffset:1000; animation:ssc-ecg-line ${l} linear infinite; filter:drop-shadow(0 0 5px ${s}) }`.trim()),f("ssc-ecg-anim").textContent="@keyframes ssc-ecg-line{to{stroke-dashoffset:0}}",L.current&&(L.current.setAttribute("d",x[e]),L.current.style.stroke=s,L.current.style.strokeDasharray="1000",L.current.style.strokeDashoffset="1000",L.current.style.animation=`ssc-ecg-line ${l} linear infinite`),N.current&&(N.current.style.top=`${n}%`,N.current.style.transform="translateY(-50%)",N.current.style.zIndex=String(t));const o=document.getElementById("ssc-ecg-logo-preview");o&&(a?(o.src=a,o.style.display="block"):(o.removeAttribute("src"),o.style.display="none"),o.style.maxWidth=`${r}px`,o.style.maxHeight=`${r}px`)},[_]);const T=(0,e.useCallback)(async()=>{if(w){E(!0);try{await j(t,w,{append:!0}),m((0,s.__)("Effet ECG appliqu√© !","supersede-css-jlg"))}catch(e){console.error("SSC ECG apply failed",e),m((0,s.__)("Impossible d'appliquer l'effet ECG.","supersede-css-jlg"),{politeness:"assertive"})}finally{E(!1)}}},[w,t]);!function(s,n){const t=(0,e.useRef)(null),r=(0,e.useCallback)(()=>{s(),t.current=window.requestAnimationFrame(r)},[s]);(0,e.useEffect)(()=>{if(n)return t.current=window.requestAnimationFrame(r),()=>{t.current&&window.cancelAnimationFrame(t.current)}},[n,r])}(()=>{const e=B.current;if(!e)return;const s=e.getContext("2d");if(!s)return;const{scanlineColor:n,scanlineOpacity:t,scanlineSpeed:r,noiseIntensity:a,chromaticAberration:l}=F,o=e.offsetWidth||400,i=e.offsetHeight||200;e.width!==o&&(e.width=o),e.height!==i&&(e.height=i);const c=s.createImageData(o,i),d=c.data;for(let e=0;e<d.length;e+=4){const s=Math.random()*a*255;d[e]=d[e+1]=d[e+2]=s,d[e+3]=255}s.putImageData(c,0,0);const u=[{color:`rgba(255, 0, 0, ${t/2})`,offset:l},{color:`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, ${t})`,offset:0},{color:`rgba(0, 0, 255, ${t/2})`,offset:-l}],p=Date.now()/1e3;u.forEach(({color:e,offset:n})=>{s.fillStyle=e;for(let e=p*r*10%4;e<i;e+=4)s.fillRect(n,e,o,2)})},"crt"===l);const R=(0,e.useCallback)(()=>{if(!window.wp?.media)return;const e=window.wp.media({title:(0,s.__)("Choisir une image","supersede-css-jlg"),multiple:!1});e.on("select",()=>{const s=e.state().get("selection").first();if(!s)return;const n=s.toJSON().url;k(e=>({...e,logoUrl:n}))}),e.open()},[]),z=(0,e.useMemo)(()=>[{name:"backgrounds",title:(0,s.__)("üåå Fonds Anim√©s","supersede-css-jlg")},{name:"ecg",title:(0,s.__)("‚ù§Ô∏è ECG / Battement de C≈ìur","supersede-css-jlg")},{name:"crt",title:(0,s.__)("üì∫ Effet CRT (Scanline)","supersede-css-jlg")}],[]);return(0,i.jsx)("div",{className:"ssc-visual-effects-app","data-component":"visual-effects",children:(0,i.jsx)(n.TabPanel,{className:"ssc-ve-tabs",activeClass:"active",tabs:z,onSelect:e=>o(e),children:e=>"backgrounds"===e.name?(0,i.jsxs)(n.Card,{id:"ssc-ve-panel-backgrounds",className:"ssc-ve-panel active",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h3",{children:(0,s.__)("Param√®tres du Fond","supersede-css-jlg")})}),(0,i.jsx)(n.CardBody,{children:(0,i.jsxs)(n.Flex,{align:"flex-start",gap:16,wrap:!0,children:[(0,i.jsxs)(n.FlexBlock,{children:[(0,i.jsx)(n.SelectControl,{label:(0,s.__)("Type d'arri√®re-plan","supersede-css-jlg"),value:c.type,options:[{label:(0,s.__)("√âtoiles","supersede-css-jlg"),value:"stars"},{label:(0,s.__)("D√©grad√©","supersede-css-jlg"),value:"gradient"}],onChange:e=>d(s=>({...s,type:e}))}),"stars"===c.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{htmlFor:"starColor",className:"ssc-ve-label",children:(0,s.__)("Couleur des √©toiles","supersede-css-jlg")}),(0,i.jsx)("input",{id:"starColor",type:"color",value:c.starColor,onChange:e=>d(s=>({...s,starColor:e.target.value}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Nombre d'√©toiles","supersede-css-jlg"),min:50,max:500,step:10,value:c.starCount,onChange:e=>d(s=>({...s,starCount:"number"==typeof e?e:s.starCount}))})]}):(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Vitesse du d√©grad√©","supersede-css-jlg"),min:2,max:20,step:1,value:c.gradientSpeed,onChange:e=>d(s=>({...s,gradientSpeed:"number"==typeof e?e:s.gradientSpeed}))}),(0,i.jsx)("pre",{id:"ssc-bg-css",className:"ssc-code",children:u}),(0,i.jsx)(n.Button,{id:"ssc-bg-apply",variant:"primary",onClick:I,disabled:b,isBusy:b,children:b?(0,s.__)("Application‚Ä¶","supersede-css-jlg"):(0,s.__)("Appliquer","supersede-css-jlg")})]}),(0,i.jsxs)(n.FlexItem,{children:[(0,i.jsx)("h3",{children:(0,s.__)("Aper√ßu","supersede-css-jlg")}),(0,i.jsx)("div",{id:"ssc-bg-preview",ref:g,className:"ssc-ve-preview-box"})]})]})})]},"backgrounds"):"ecg"===e.name?(0,i.jsxs)(n.Card,{id:"ssc-ve-panel-ecg",className:"ssc-ve-panel active",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h3",{children:(0,s.__)("Param√®tres de l'ECG","supersede-css-jlg")})}),(0,i.jsx)(n.CardBody,{children:(0,i.jsxs)(n.Flex,{align:"flex-start",gap:16,wrap:!0,children:[(0,i.jsxs)(n.FlexBlock,{children:[(0,i.jsx)(n.SelectControl,{label:(0,s.__)("Preset de Rythme","supersede-css-jlg"),value:_.preset,options:[{label:(0,s.__)("Stable","supersede-css-jlg"),value:"stable"},{label:(0,s.__)("Rapide","supersede-css-jlg"),value:"fast"},{label:(0,s.__)("Critique","supersede-css-jlg"),value:"critical"}],onChange:e=>k(s=>({...s,preset:e}))}),(0,i.jsx)("label",{htmlFor:"ssc-ecg-color",className:"ssc-ve-label",children:(0,s.__)("Couleur de la ligne","supersede-css-jlg")}),(0,i.jsx)("input",{id:"ssc-ecg-color",type:"color",value:_.color,onChange:e=>k(s=>({...s,color:e.target.value}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Positionnement (top)","supersede-css-jlg"),min:0,max:100,step:1,value:_.top,onChange:e=>k(s=>({...s,top:"number"==typeof e?e:s.top}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Superposition (z-index)","supersede-css-jlg"),min:-10,max:10,step:1,value:_.zIndex,onChange:e=>k(s=>({...s,zIndex:"number"==typeof e?e:s.zIndex}))}),(0,i.jsx)(n.Button,{id:"ssc-ecg-upload-btn",variant:"secondary",onClick:R,children:(0,s.__)("Choisir une image","supersede-css-jlg")}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Taille du logo","supersede-css-jlg"),min:20,max:200,step:1,value:_.logoSize,onChange:e=>k(s=>({...s,logoSize:"number"==typeof e?e:s.logoSize}))}),(0,i.jsx)("pre",{id:"ssc-ecg-css",className:"ssc-code ssc-code-small",children:w}),(0,i.jsx)(n.Button,{id:"ssc-ecg-apply",variant:"primary",onClick:T,disabled:A,isBusy:A,children:A?(0,s.__)("Application‚Ä¶","supersede-css-jlg"):(0,s.__)("Appliquer l'Effet","supersede-css-jlg")})]}),(0,i.jsxs)(n.FlexItem,{children:[(0,i.jsx)("h3",{children:(0,s.__)("Aper√ßu","supersede-css-jlg")}),(0,i.jsxs)("div",{id:"ssc-ecg-preview-container",className:"ssc-ve-preview-box",children:[(0,i.jsx)("img",{id:"ssc-ecg-logo-preview",alt:(0,s.__)("Logo Preview","supersede-css-jlg"),style:{display:"none"}}),(0,i.jsx)("svg",{id:"ssc-ecg-preview-svg",ref:N,viewBox:"0 0 400 60",preserveAspectRatio:"none",className:"ssc-ecg-line-svg",children:(0,i.jsx)("path",{id:"ssc-ecg-preview-path",ref:L,className:"ssc-ecg-path",d:x[_.preset]})})]})]})]})})]},"ecg"):(0,i.jsxs)(n.Card,{id:"ssc-ve-panel-crt",className:"ssc-ve-panel active",children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)("h3",{children:(0,s.__)("Param√®tres de l'effet CRT","supersede-css-jlg")})}),(0,i.jsx)(n.CardBody,{children:(0,i.jsxs)(n.Flex,{align:"flex-start",gap:16,wrap:!0,children:[(0,i.jsxs)(n.FlexBlock,{children:[(0,i.jsx)("label",{htmlFor:"scanlineColor",className:"ssc-ve-label",children:(0,s.__)("Couleur Scanline","supersede-css-jlg")}),(0,i.jsx)("input",{id:"scanlineColor",className:"ssc-crt-control",type:"color",value:F.scanlineColor,onChange:e=>$(s=>({...s,scanlineColor:e.target.value}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Opacit√© Scanline","supersede-css-jlg"),min:0,max:1,step:.05,value:F.scanlineOpacity,onChange:e=>$(s=>({...s,scanlineOpacity:"number"==typeof e?e:s.scanlineOpacity}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Vitesse Scanline","supersede-css-jlg"),min:.1,max:2,step:.1,value:F.scanlineSpeed,onChange:e=>$(s=>({...s,scanlineSpeed:"number"==typeof e?e:s.scanlineSpeed}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Intensit√© Bruit","supersede-css-jlg"),min:0,max:.5,step:.02,value:F.noiseIntensity,onChange:e=>$(s=>({...s,noiseIntensity:"number"==typeof e?e:s.noiseIntensity}))}),(0,i.jsx)(n.RangeControl,{label:(0,s.__)("Aberration Chromatique","supersede-css-jlg"),min:0,max:5,step:.5,value:F.chromaticAberration,onChange:e=>$(s=>({...s,chromaticAberration:"number"==typeof e?e:s.chromaticAberration}))})]}),(0,i.jsxs)(n.FlexItem,{children:[(0,i.jsx)("h3",{children:(0,s.__)("Aper√ßu","supersede-css-jlg")}),(0,i.jsx)("div",{className:"ssc-ve-preview-box",children:(0,i.jsx)("canvas",{id:"ssc-crt-canvas",ref:B})})]})]})})]},"crt")})})})})();